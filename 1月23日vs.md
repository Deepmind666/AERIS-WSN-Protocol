# 1月23日vs.md

**主题：AERIS 代码层级梳理（面向过审与审查）**
**日期：2026-01-23**

---

## 0. 目的
- 对当前项目的“真实核心代码链路”进行分层梳理，避免被历史/冗余文件干扰。
- 明确：**协议逻辑 → 实验脚本 → 统计处理 → 图表生成 → 论文插图** 的最短路径。
- 作为后续审查与外部评估的基准说明文档。

---

## 1. 分层结构总览（由底向上）

### L0 数据层
- `data/Intel_Lab_Data/`：Intel Lab 原始数据与元信息（主要真实数据源）
- `data/real_datasets/`、`data/multi_datasets/`：多数据集扩展（需明确记录来源）
- 关键提示：所有“现实对比”的声明必须能回溯到此层。

### L1 物理/能耗模型层（公平对比核心）
- `src/realistic_channel_model.py`：IEEE 802.15.4 对数正态阴影衰落 + 环境映射
- `src/improved_energy_model.py`：CC2420 能耗模型（TX/RX 计算）
- 这一层定义了“公平比较”的物理基础。任何对比实验应强制复用该层。

### L2 协议核心组件（AERIS 内核）
- `src/aeris_protocol.py`：主协议（CAS + Skeleton + Gateway + Safety/Fairness）
- `src/cas_selector.py`：CAS 模式选择（Direct/Chain/Two-Hop）
- `src/skeleton_selector.py`：骨干/主轴选择
- `src/gateway_selector.py`：网关选择与多指标打分
- `src/fairness_metrics.py`：公平性指标（Jain 等）
- `src/adaptive_reliability.py`：安全与容错策略

### L3 基线协议层（对比基线）
- `src/baseline_protocols/leach_protocol.py`
- `src/baseline_protocols/heed_protocol.py`
- `src/baseline_protocols/pegasis_protocol.py`
- `src/baseline_protocols/teen_protocol.py`
- `src/baseline_protocols/sep_protocol.py`
- **注意**：SOTA 对比图中“协议集”必须与这一层一致。

### L4 实验入口层（生成 JSON 的主要脚本）
- SOTA 综合对比：`scripts/run_sota_comparison.py` → `results/sota_comparison.json`
- Intel Replay（真实轨迹）：`scripts/run_intel_replay.py`
- Monte Carlo 拓扑：`scripts/run_monte_carlo_uniform.py`
- 动态场景：
  - `scripts/run_dynamic_corridor_compare.py`
  - `scripts/run_dynamic_moving_bs_compare.py`
  - `scripts/run_dynamic_dropout_compare.py`
- 大规模：`scripts/run_large_scale_long.py`
- 扩展：`scripts/run_scalability_experiment.py`

### L5 统计验证层
- `scripts/compute_dynamic_significance.py`
- `scripts/run_stats_multitest.py`
- `scripts/run_stats_bootstrap.py`
- `scripts/compute_monte_carlo_stats.py`

### L6 图表生成层（论文级输出）
- 论文主图：`scripts/plot_paper_figures.py`
- SOTA 6-panel：`scripts/generate_sota_figures.py`
  - 输入：`results/sota_comparison.json`
  - 输出：`for_submission/figures/sota_comparison_6panel.{pdf,svg}`
- 动态实验图：`scripts/plot_dynamic_comparisons.py`
- PDR 诊断：`scripts/plot_pdr_breakdown_diagnostics.py`
- 方法流程图：`scripts/plot_method_flowchart.py`

### L7 论文稿件层
- 主稿：`for_submission/aeris_paper_final.tex`
- 图表目录：`for_submission/figures/`
- 参考文献：`references/main.bib` 或 `for_submission/bibliography.bib`

---

## 2. 最短“审稿链路”建议（用于外部审查）
1. `src/aeris_protocol.py`（核心逻辑）
2. `src/realistic_channel_model.py` + `src/improved_energy_model.py`（公平对比基础）
3. `scripts/run_sota_comparison.py`（数据生成）
4. `scripts/generate_sota_figures.py`（论文图）
5. `for_submission/figures/sota_comparison_6panel.pdf`（审稿人可读图）

---

## 3. 风险点提示（必须严格控制）
- 若 L1 物理/能耗模型不统一，所有“对比结论”无效。
- L4 → L6 之间需严格保证数据路径一致（尤其是 SOTA 与动态实验）。
- “过审核心”应避免使用未验证的数据源或无法复现的脚本入口。

---

## 4. 下一步建议（用于你请 GPT 审查）
- 让审查者重点核验：
  1) AERIS 算法核心是否可复现
  2) 对比协议是否一致
  3) JSON → 图表 → 论文是否链路清晰

---

**备注**：本梳理仅基于代码实际结构，历史冗余路径（Enhanced‑EEHFR 等）不列入核心链路。

